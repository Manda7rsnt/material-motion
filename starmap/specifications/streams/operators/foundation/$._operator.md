---
layout: page
title: $._operator
status:
  date: December 4, 2016
  is: Draft
knowledgelevel: L3
library: streams
depends_on:
  - /starmap/specifications/streams/MotionObservable
availability:
  - platform:
    name: Android
    label: "streams-android in develop"
    url: https://github.com/material-motion/streams-android
  - platform:
    name: iOS
    label: "streams-swift in develop"
    url: https://github.com/material-motion/streams-swift
  - platform:
    name: JavaScript
    label: "material-motion-streams in develop"
    url: https://github.com/material-motion/material-motion-js
---

# $._operator specification

This is the engineering specification for the `MotionObservable` operator: `_operator`.

## Overview

`_operator` is a means by which new operators can be created. An operator can change, add, or remove
values in the stream. It can also alter when values are dispatched in the stream, or change the type of the stream's values.

## MVP

### Expose _operator API

```swift
class MotionObservable<T> {
  public func _operator<U>(operation: ((U) -> Void, T) -> Void) -> MotionObservable<U>
```

### Pass next to the operation function

The operation should only be allowed to invoke `next`. Pass the observer's next function to the
operation.

```swift
class MotionObservable<T> {
  public func _operator<U>(operation: ((U) -> Void, T) -> Void) -> MotionObservable<U>
    return MotionObservable<U>({ observer in
      return self.subscribe(next: { value in
        operation(observer.next, value)
      }, active: observer.active).unsubscribe
    }
  }
}
```
